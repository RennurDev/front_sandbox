(this.webpackJsonprunning_front=this.webpackJsonprunning_front||[]).push([[0],{144:function(t,e,n){},149:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),r=n(9),o=n.n(r),c=n(11),s=n(12),l=n(25),h=n(14),u=n(13),d=n(176),j=n(2),b=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(j.jsx)("div",{children:Object(j.jsx)(d.a,{container:!0,spacing:3,children:Object(j.jsx)(d.a,{item:!0,xs:12,children:Object(j.jsx)("p",{children:"\u5fa1\u8336\u30ce\u6c34"})})})})}}]),n}(a.Component),p=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(j.jsx)("div",{children:Object(j.jsx)(b,{})})}}]),n}(a.Component),O=n(52),f=n.n(O);n(123);var v=n(180),m=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var t=this,e=this.props.btnContent,n=this.props.btnColor;return Object(j.jsx)("div",{children:Object(j.jsx)(v.a,{color:n,fullWidth:!0,onClick:function(){return t.props.onClick()},children:e})})}}]),n}(a.Component),x=n(27),y=n.n(x);f.a.accessToken="pk.eyJ1IjoiaXNub3QiLCJhIjoiY2tkemV4MnR2MXRyMDJ4a2pzd2h1eHg1ayJ9.ALgtUeaHBDuvqvOR7008vA";var g=new f.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}),C=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={area:"",isStarted:!1,current_pos:{lng:0,lat:0}},a.history=[],a.previous_location=void 0,a.min_duration=2e3,a.watch_id=-1,a.onPosition=a.onPosition.bind(Object(l.a)(a)),a.onClick=a.onClick.bind(Object(l.a)(a)),a.setMap=a.setMap.bind(Object(l.a)(a)),a}return Object(s.a)(n,[{key:"_add",value:function(t){this.history.push([t.coords.longitude,t.coords.latitude])}},{key:"onPosition",value:function(t){console.log("watched"),0===this.history.length?(this.previous_location=t,this._add(t)):this.addPositionToHistory(t),function(t,e){try{e.getSource("route").setData({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t}})}catch(n){}}(this.history,this.map)}},{key:"addPositionToHistory",value:function(t){parseInt(t.timestamp-this.previous_location.timestamp)>this.min_duration&&(this._add(t),this.previous_location=t)}},{key:"postHistory",value:function(t){var e=this,n={track:{data:String(t),user_id:this.props.current_user.id}};y.a.post("http://localhost:3001/tracks",n).then((function(t){t.data;e.history=[]})).catch((function(t){console.log(t)}))}},{key:"onClick",value:function(){var t=this.state.isStarted;t?(0!==this.history.length&&this.postHistory(this.history),navigator.geolocation.clearWatch(this.watch_id),this.setState({isStarted:!t})):(console.log(this.history),0===this.history.length&&(!function(t){try{t.removeLayer("route"),t.removeSource("route")}catch(e){console.log(e)}t.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[]}}}),t.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#888","line-width":4}})}(this.map),this.watch_id=navigator.geolocation.watchPosition(this.onPosition),this.setState({isStarted:!t})))}},{key:"setMap",value:function(t){this.setState({current_pos:{lng:t.coords.longitude,lat:t.coords.latitude}}),this.map=new f.a.Map({container:this.mapContainer,center:[this.state.current_pos.lng,this.state.current_pos.lat],style:"mapbox://styles/mapbox/streets-v9",zoom:16}),this.map.addControl(g)}},{key:"componentDidMount",value:function(){navigator.geolocation.getCurrentPosition(this.setMap)}},{key:"componentWillUnmount",value:function(){try{this.map.remove()}catch(t){console.log(t)}}},{key:"render",value:function(){var t=this,e=this.state.isStarted,n=e?"RECORD":"START",a=e?"secondary":"primary",i=this.onClick;return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"mapContainer",ref:function(e){return t.mapContainer=e}}),Object(j.jsx)(m,{onClick:i,btnContent:n,btnColor:a})]})}}]),n}(a.Component),k=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var t=this.props.current_user;return Object(j.jsx)("div",{children:Object(j.jsxs)("p",{children:["I AM ",t.name]})})}}]),n}(a.Component),_=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(j.jsx)("div",{children:Object(j.jsxs)(d.a,{container:!0,spacing:2,children:[Object(j.jsx)(d.a,{item:!0,xs:6,children:Object(j.jsx)(v.a,{variant:"outlined",color:"primary",fullWidth:!0,children:"prev"})}),Object(j.jsx)(d.a,{item:!0,xs:6,children:Object(j.jsx)(v.a,{variant:"outlined",color:"primary",fullWidth:!0,children:"next"})}),Object(j.jsx)(d.a,{item:!0,xs:12,children:Object(j.jsx)(v.a,{variant:"outlined",color:"secondary",fullWidth:!0,children:"delete"})})]})})}}]),n}(a.Component),S=n(183),P=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var t=this;return Object(j.jsx)("div",{children:Object(j.jsxs)(d.a,{container:!0,spacing:2,children:[Object(j.jsx)(d.a,{item:!0,xs:12,children:Object(j.jsx)("h1",{children:"Edit Profile"})}),Object(j.jsx)(d.a,{item:!0,xs:9,children:Object(j.jsx)(S.a,{value:this.props.form.name,onChange:function(e){return t.props.handleChange(e,"name")},fullWidth:!0})}),Object(j.jsx)(d.a,{item:!0,xs:3,children:Object(j.jsx)(v.a,{variant:"outlined",color:"primary",fullWidth:!0,onClick:this.props.handleUpdate,children:"Update"})}),Object(j.jsx)(d.a,{item:!0,xs:12,children:Object(j.jsx)("h1",{children:"Logout"})}),Object(j.jsx)(d.a,{item:!0,xs:12,children:Object(j.jsx)(v.a,{variant:"outlined",color:"secondary",fullWidth:!0,children:"LOGOUT"})}),Object(j.jsx)(d.a,{item:!0,xs:12,children:Object(j.jsx)("h1",{children:"Delete Account"})}),Object(j.jsx)(d.a,{item:!0,xs:12,children:Object(j.jsx)(v.a,{variant:"outlined",color:"secondary",fullWidth:!0,children:"DELETE"})})]})})}}]),n}(a.Component),T=n(181),D=n(182),L=n(87),M=n.n(L),U=n(88),W=n.n(U),w=n(89),E=n.n(w),H=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(j.jsxs)(T.a,{value:this.props.value,onChange:this.props.handleChange,children:[Object(j.jsx)(D.a,{label:"Profile",value:"Profile",icon:Object(j.jsx)(M.a,{})}),Object(j.jsx)(D.a,{label:"Tracks",value:"Tracks",icon:Object(j.jsx)(W.a,{})}),Object(j.jsx)(D.a,{label:"Setting",value:"Setting",icon:Object(j.jsx)(E.a,{})})]})}}]),n}(a.Component),A=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={value:""},a}return Object(s.a)(n,[{key:"render",value:function(){var t=this,e=this.state.value,n=this.props.handleProfileChange,a=this.props.handleProfileUpdate,i=this.props.current_user,r=this.props.form;return console.log(this.props),Object(j.jsxs)("div",{children:[Object(j.jsx)(H,{value:e,handleChange:function(e,n){t.setState({value:n})}}),"Profile"===this.state.value?Object(j.jsx)(k,{current_user:i}):"Tracks"===this.state.value?Object(j.jsx)(_,{}):"Setting"===this.state.value?Object(j.jsx)(P,{current_user:i,form:r,handleChange:n,handleUpdate:a}):null]})}}]),n}(a.Component),F=(n(144),function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={lists:[],form:{id:"",name:""}},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;y.a.get("http://localhost:3001/users").then((function(e){var n=e.data;t.setState({lists:n})})).catch((function(t){console.log(t)}))}},{key:"handleChange",value:function(t,e){var n=t.target.value,a=this.state.form;a[e]=n,this.setState({form:a})}},{key:"handleCreate",value:function(){var t={user:{name:this.state.form.name}};y.a.post("http://localhost:3001/users",t).then((function(t){t.data})).catch((function(t){console.log(t)}))}},{key:"handleDestroy",value:function(){var t={user:{id:this.state.form.id}},e="http://localhost:3001/users/"+this.state.form.id;y.a.delete(e,t).then((function(t){t.data})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){var t=this;return Object(j.jsxs)("div",{children:[Object(j.jsx)("form",{noValidate:!0,autoComplete:"off",children:Object(j.jsxs)(d.a,{container:!0,spacing:2,children:[Object(j.jsx)(d.a,{item:!0,xs:12,children:this.state.lists.map((function(t){return Object(j.jsx)("div",{children:Object(j.jsxs)(d.a,{container:!0,spaceing:0,children:[Object(j.jsx)(d.a,{item:!0,xs:2,children:t.id}),Object(j.jsx)(d.a,{item:!0,xs:4,children:t.name}),Object(j.jsx)(d.a,{item:!0,xs:4,children:t.created_at})]})})}))}),Object(j.jsx)(d.a,{item:!0,xs:9,children:Object(j.jsx)(S.a,{value:this.state.form.name,onChange:function(e){return t.handleChange(e,"name")},fullWidth:!0,label:"Name"})}),Object(j.jsx)(d.a,{item:!0,xs:3,children:Object(j.jsx)(v.a,{onClick:function(){return t.handleCreate()},variant:"outlined",color:"primary",fullWidth:!0,children:"CREATE"})}),Object(j.jsx)(d.a,{item:!0,xs:2,children:Object(j.jsx)(S.a,{value:this.state.form.id,onChange:function(e){return t.handleChange(e,"id")}})}),Object(j.jsx)(d.a,{item:!0,xs:3,children:Object(j.jsx)(v.a,{onClick:function(){return t.handleDestroy()},variant:"outlined",color:"secondary",fullWidth:!0,children:"DELETE"})})]})}),Object(j.jsx)("p",{children:"Forget Name?(sorry, but I can do nothing.)"})]})}}]),n}(a.Component)),I=n(53),R=n(15),J=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={current_user:{id:"2",name:"hoge"},form:{name:""}},a.handleProfileChange=a.handleProfileChange.bind(Object(l.a)(a)),a.handleProfileUpdate=a.handleProfileUpdate.bind(Object(l.a)(a)),a}return Object(s.a)(n,[{key:"handleProfileChange",value:function(t,e){var n=t.target.value,a=this.state.form;a[e]=n,this.setState({form:a})}},{key:"handleProfileUpdate",value:function(){var t=this,e={user:{id:this.state.current_user.id,name:this.state.form.name}},n="http://localhost:3001/users/"+this.state.current_user.id;y.a.put(n,e).then((function(e){t.setState({current_user:{name:t.state.form.name}})})).catch((function(t){console.log(t)}))}},{key:"componentDidMount",value:function(){this.setState({form:{name:this.state.current_user.name}})}},{key:"render",value:function(){return Object(j.jsx)("div",{className:"overflow-hidden",children:Object(j.jsxs)(I.a,{children:[Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{children:Object(j.jsx)(I.b,{to:"/home",children:"Home"})}),Object(j.jsx)("li",{children:Object(j.jsx)(I.b,{to:"/sign_up",children:"Sign up"})})]}),Object(j.jsxs)(R.c,{children:[Object(j.jsx)(R.a,{path:"/sign_up",children:Object(j.jsx)(F,{})}),Object(j.jsxs)(R.a,{path:"/home",children:[Object(j.jsx)(p,{}),Object(j.jsx)(C,{current_user:this.state.current_user}),Object(j.jsx)(A,{current_user:this.state.current_user,form:this.state.form,handleProfileChange:this.handleProfileChange,handleProfileUpdate:this.handleProfileUpdate})]})]})]})})}}]),n}(a.Component),N=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,185)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),a(t),i(t),r(t),o(t)}))};o.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(J,{})}),document.getElementById("root")),N()}},[[149,1,2]]]);
//# sourceMappingURL=main.ddca9490.chunk.js.map